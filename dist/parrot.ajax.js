/**
 * parrot-module-ajax - Make easy do AJAX petitions with different backend. Using with URL module for better experience.
 * @version v0.12.16
 * @link    https://github.com/parrotjs/parrot-module-ajax
 * @author  Kiko Beats (https://github.com/Kikobeats)
 * @license MIT
 */
(function(){!function(){return parrot.ajax=function(r,e){var t,n,u,a,o;return t=function(r){var e;return e={METHOD:"get",SEND:{},HEADERS:{},ASYNC:!0,DATATYPE:"json",CONTENT_TYPE:"application/x-www-form-urlencoded"},new Promise(function(t,n){return parrot.$.ajax({url:r.url,type:r.method||e.METHOD,data:r.send||e.SEND,dataType:r.dataType||e.DATATYPE,contentType:r.contentType||e.CONTENT_TYPE,async:r.async||e.ASYNC,headers:r.headers||e.HEADERS,success:function(r){return 0===r.status?n({code:0,message:{errors:[{param:"url",msg:"Server Unavailable."}]}}):t(r)},error:function(r,e){var t;if(e="object"==typeof r?r:e,null!=e.responseJSON)t=e.responseJSON;else try{t=JSON.parse(e.response)}catch(u){t=e.response}return n({code:e.status,message:t})}})})},n=function(r,e){return t(r).then(function(r){return e(null,r)},function(r){return e(r,null)})},null!=parrot.environment&&(u=parrot.endpoint[parrot.environment]()),r.url?r.url!==u&&r.url!==""+u+"/"+r.path&&r.url!==""+u+"?"+r.query&&r.url!==""+u+"/"+r.path+"?"+r.query&&(null!=r.path&&(r.url=""+r.url+"/"+r.path),null!=r.query&&(r.url=""+r.url+"?"+r.query)):("string"==typeof arguments[0]&&(null!=(null!=(o=parrot.url)&&"function"==typeof o[a=arguments[0]]?o[a]():void 0)?r=parrot.url.getOrUpdate(arguments[0],arguments[1]):"object"==typeof arguments[1]?(r=arguments[1],r.url=arguments[0]):r={url:arguments[0]},"object"==typeof arguments[1]&&(e=arguments[2])),r.query&&r.path?r.url=""+u+"/"+r.path+"?"+r.query:(r.query&&!r.path&&(r.url=""+u+"?"+r.query),r.path&&!r.query&&(r.url=""+u+"/"+r.path))),n(r,e)}}()}).call(this);